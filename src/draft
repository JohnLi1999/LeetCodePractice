public static int[] countBits(int num) {
    int[] result = new int[num + 1];

    for (int i = 0; i <= num; i++) {
        int count = 0;
        int x = i;

        while (x != 0) {
            count++;
            x &= (x - 1);
        }

        result[i] = count;
    }

    return result;
}